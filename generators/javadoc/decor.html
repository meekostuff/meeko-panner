<!DOCTYPE html>

<html lang="en">
<head>
  <meta http-equiv="content-type" content="text/html">
  <meta charset="utf-8">

  <title>Java Platform SE</title>
  <link rel="stylesheet" type="text/css" href="stylesheet.css" title="Style">
  <link rel="stylesheet" type="text/css" href="decor.css" title="Style">

<script src="../../DOMSprockets/Sprocket.js"></script>
<script src="../../DOMSprockets/UI.js"></script>

<style type="text/css">
*[hidden] { display: none; }
#header, #content { 
-webkit-transition: opacity 0.25s linear;
-moz-transition: opacity 0.25s linear;
-ms-transition: opacity 0.25s linear;
-o-transition: opacity 0.25s linear;
transition: opacity 0.25s linear;
}
#header[hidden], #content[hidden] {
display: block;
visibility: visible;
opacity: 0;
}
</style>

</head>
<body>
  
<div id="quickLinks">

<div class="topNav">
<a href="#indexContainer"></a>
<ul class="navList" title="Navigation">
<li><a href="#packages">Packages</a></li>
<li><a href="#classes">Classes</a></li>
</ul>
</div>

<div id="indexContainer" class="indexContainer">

<div id="packages"><a href="base-url:overview-summary.html"></a><div style="width: 100%; text-align: center;"><img src="../../decor/waiting-small.gif" /></div></div> 
<div id="classes"><a href="base-url:allclasses-noframe.html"></a><div style="width: 100%; text-align: center;"><img src="../../decor/waiting-small.gif" /></div></div> 

</div>

</div>

<div id="main">

<!-- ========= START OF TOP NAVBAR ======= -->
<div id="hierarchy" class="topNav">
<ul class="navList" title="Navigation">
<li><a href="base-url:overview-summary.html">Overview</a></li>
<!-- FIXME The full tree is 1.28MB and dynamically loading / processing is really slow. Indexes are also large
<li><a href="base-url:overview-tree.html">Tree</a></li>
<li><a href="base-url:index-files/index-1.html">Index</a></li> 
-->
<li><a href="base-url:deprecated-list.html">Deprecated</a></li>
<li><a href="base-url:help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage">{title}</div>
</div>
<!--
<div class="subNav">
<ul class="navList">
<li>Prev</li>
<li>Next</li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="base-url:allclasses-noframe.html">All Classes</a></li>
</ul>
</div>
-->
<!-- ========= END OF TOP NAVBAR ========= -->
<div id="header">
</div>

<div id="content">
<div style="width: 100%; text-align: center;"><img src="../../decor/waiting-big.gif" style="border: none;" /></div>
</div>

<div id="footer">
</div>

</div>
<script>
(function() {
  var DOM = Meeko.DOM, $id = DOM.$id, $$ = DOM.$$, $ = DOM.$,
      _ = Meeko.stuff, extend = _.extend;

  var sprockets = Meeko.sprockets;
  var UI = sprockets.UI;
  
  var Panel = UI.Panel.evolve({ // panel is an abstract class. Sub-classes must define the load() method
    setHidden: function(state) {
      UI.Panel.prototype.setHidden.apply(this, arguments);
      if (!!state) return; 
      if (this.hasClass('ready')) return;
      // if panel is to be shown and content not already loaded ...
      this.load();
      this.addClass('ready'); // assume that the load succeeds
    }
  });
  
  var packagesPanel = Panel.evolve({
    load: function() {
      var element = this.boundElement;
	  var url = this.$('a').href;
      DOM.loadHTML(url)
	  .done(function(doc) { // TODO get this URL from the DOM
        var items = DOM.$$("table.overviewSummary tbody + tbody > tr", doc).map(function(row) {
          var link = DOM.$('a', row), title = DOM.$('div.block', row);
          return '<li><a title="' + (title ? title.textContent : '') + '" h'+'ref="' + link.href + '">' + link.textContent + '</a></li>\n';
        });
        element.innerHTML = '<ul>\n' + items.join('\n') + '\n</ul>';
      });
    }
  });
  
  var classesPanel = Panel.evolve({
    load: function() {
      var element = this.boundElement;
	  var url = this.$('a').href;
      DOM.loadHTML(url)
	  .done(function(doc) {
        element.innerHTML = DOM.$(".indexContainer ul", doc).outerHTML;
      });
    }
  });
  
  sprockets.register("#packages", packagesPanel); // #quickLinks #indexContainer > div#packages
  sprockets.register("#classes", classesPanel); // #quickLinks #indexContainer > div#classes
  sprockets.register("#indexContainer", UI.SwitchBox); // #quickLinks #indexContainer

  var NavTreeItem = UI.NavTreeItem.evolve({
    setSelected: function(state) {
        this.boundElement.className = !!state ? "navBarCell1Rev" : null;
    },
    getSelected: function() {
        return this.boundElement.className == "navBarCell1Rev";
    }
  });

  sprockets.register("#quickLinks .navList li", NavTreeItem);
  sprockets.register("#quickLinks .navList", UI.List);
  sprockets.register("#quickLinks .topNav", UI.NavTree, {
  handlers: [
	{
		type: 'click',
		delegator: 'a',
		preventDefault: true
	},
	{
		type: "click",
		delegator: 'li',
		action: function(event, item) {
			this.selectItem(item);
		}
	},
	{
		type: "change",
		action: function(event) {
			var viewer = this.getView();
			var target = UI.NavTreeItem(this.getSelectedItem()).getView();
			UI.SwitchBox(viewer).setView(target);
		}
	}
  ],
  callbacks: {
	enteredDocument: function() {
		this.selectItem(this.getListElement().children[0]);
	}
  }
  });
  
  sprockets.register("#hierarchy .navList li", NavTreeItem);
  sprockets.register("#hierarchy .navList", UI.List);
  sprockets.register("#hierarchy", UI.Tree);
  
  sprockets.domReady(); // WARN this line must be after all content in decor

})();
</script>
  
<script>
(function() {
var _ = Meeko.stuff;
var DOM = Meeko.DOM, $ = DOM.$, $$ = DOM.$$;

var sprockets = Meeko.sprockets;
var UI = sprockets.UI;
  
Meeko.panner.config({
	duration: 250,
    nodeRemoved: { before: hide, after: show },
    nodeInserted: { before: hide, after: show },
    pageIn: function() { // TODO this shoud be part of the binding, or at least after decorIn.
      var topNav = $("#hierarchy");
      var tree = UI.Tree(topNav);
      tree.selectItem();
      var links = tree.$$("a[href]");
      _.every(links, function(link) {
        if (link.href != document.URL) return true;
        tree.selectItem(link.parentNode);
        return false;
      });
    }
});

function hide(msg) { msg.node.setAttribute("hidden", "hidden"); }
function show(msg) { msg.node.removeAttribute("hidden"); }

})();
</script>

</body>
</html>
